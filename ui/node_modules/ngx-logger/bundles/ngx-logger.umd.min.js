!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common/http"),require("@angular/common"),require("rxjs")):"function"==typeof define&&define.amd?define("ngx-logger",["exports","@angular/core","@angular/common/http","@angular/common","rxjs"],t):t(e["ngx-logger"]={},e.ng.core,e.ng.common.http,e.ng.common,e.rxjs)}(this,function(e,t,c,o,i){"use strict";function r(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var o,n,i=r.call(e),c=[];try{for(;(void 0===t||0<t--)&&!(o=i.next()).done;)c.push(o.value)}catch(a){n={error:a}}finally{try{o&&!o.done&&(r=i["return"])&&r.call(i)}finally{if(n)throw n.error}}return c}function a(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(r(arguments[t]));return e}var n=function(){function e(e){this.http=e}return e.prototype.logOnServer=function(e,t,r,o){var n={message:t,additional:r,level:o.level,timestamp:o.timestamp,fileName:o.fileName,lineNumber:o.lineNumber},i={headers:(new c.HttpHeaders).set("Content-Type","application/json")};return this.http.post(e,n,i)},e}();n.decorators=[{type:t.Injectable}],n.ctorParameters=function(){return[{type:c.HttpClient}]};var h={TRACE:0,DEBUG:1,INFO:2,LOG:3,WARN:4,ERROR:5,OFF:6};h[h.TRACE]="TRACE",h[h.DEBUG]="DEBUG",h[h.INFO]="INFO",h[h.LOG]="LOG",h[h.WARN]="WARN",h[h.ERROR]="ERROR",h[h.OFF]="OFF";var l=function(){},u=function(){function e(e){this.config=e,this._config=e}return e.prototype.updateConfig=function(e){this._config=this._clone(e)},e.prototype.getConfig=function(){return this._clone(this._config)},e.prototype._clone=function(t){var r=new l;return Object.keys(t).forEach(function(e){r[e]=t[e]}),r},e}(),d=function(){function e(){}return e.prepareMetaString=function(e,t,r,o){return e+" "+t+(r?" ["+r+":"+o+"]":"")},e.getColor=function(e){switch(e){case h.TRACE:return"blue";case h.DEBUG:return"teal";case h.INFO:case h.LOG:return"gray";case h.WARN:case h.ERROR:return"red";case h.OFF:default:return}},e.getCallerDetails=function(){var e=new Error("");try{var t=e.stack.split("\n")[4].split("/"),r=t[t.length-1].replace(/[)]/g,"").split(":");return{fileName:r[0],lineNumber:r[1]}}catch(o){return{fileName:null,lineNumber:null}}},e.prepareMessage=function(e){try{"string"==typeof e||e instanceof Error||(e=JSON.stringify(e,null,2))}catch(t){e='The provided "message" value could not be parsed with JSON.stringify().'}return e},e.prepareAdditionalParameters=function(e){return null===e||e===undefined?null:e.map(function(e,t){try{return"object"==typeof e&&JSON.stringify(e),e}catch(r){return"The additional["+t+"] value could not be parsed using JSON.stringify()."}})},e}(),v=["TRACE","DEBUG","INFO","LOG","WARN","ERROR","OFF"],s=function(){function e(e,t,r){this.httpService=e,this.platformId=r,this._isIE=o.isPlatformBrowser(r)&&!(-1===navigator.userAgent.indexOf("MSIE")&&!navigator.userAgent.match(/Trident\//)&&!navigator.userAgent.match(/Edge\//)),this.configService=new u(t),this._logFunc=this._isIE?this._logIE.bind(this):this._logModern.bind(this)}return e.prototype.trace=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this._log(h.TRACE,e,t)},e.prototype.debug=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this._log(h.DEBUG,e,t)},e.prototype.info=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this._log(h.INFO,e,t)},e.prototype.log=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this._log(h.LOG,e,t)},e.prototype.warn=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this._log(h.WARN,e,t)},e.prototype.error=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this._log(h.ERROR,e,t)},e.prototype.updateConfig=function(e){this.configService.updateConfig(e)},e.prototype.getConfigSnapshot=function(){return this.configService.getConfig()},e.prototype._logIE=function(e,t,r,o){switch(o=o||[],e){case h.WARN:console.warn.apply(console,a([t+" ",r],o));break;case h.ERROR:console.error.apply(console,a([t+" ",r],o));break;case h.INFO:console.info.apply(console,a([t+" ",r],o));break;default:console.log.apply(console,a([t+" ",r],o))}},e.prototype._logModern=function(e,t,r,o){var n=d.getColor(e);switch(o=o||[],e){case h.WARN:console.warn.apply(console,a(["%c"+t,"color:"+n,r],o));break;case h.ERROR:console.error.apply(console,a(["%c"+t,"color:"+n,r],o));break;case h.INFO:console.info.apply(console,a(["%c"+t,"color:"+n,r],o));break;case h.TRACE:console.trace.apply(console,a(["%c"+t,"color:"+n,r],o));break;case h.DEBUG:console.debug.apply(console,a(["%c"+t,"color:"+n,r],o));break;default:console.log.apply(console,a(["%c"+t,"color:"+n,r],o))}},e.prototype._log=function(e,t,r,o){var n=this;void 0===r&&(r=[]),void 0===o&&(o=!0);var i=this.configService.getConfig(),c=o&&i.serverLoggingUrl&&e>=i.serverLogLevel,a=!(e<i.level);if(t&&(c||a)){var l=v[e];t=d.prepareMessage(t);var u=d.prepareAdditionalParameters(r),s=(new Date).toISOString(),p=d.getCallerDetails();if(c){var f={level:e,timestamp:s,fileName:p.fileName,lineNumber:p.lineNumber};t=t instanceof Error?t.stack:t,this.httpService.logOnServer(i.serverLoggingUrl,t,u,f).subscribe(function(e){},function(e){n._log(h.ERROR,"FAILED TO LOG ON SERVER: "+t,[e],!1)})}if(a){var g=d.prepareMetaString(s,l,p.fileName,p.lineNumber);return this._logFunc(e,g,t,r)}}},e}();s.decorators=[{type:t.Injectable}],s.ctorParameters=function(){return[{type:n},{type:l},{type:undefined,decorators:[{type:t.Inject,args:[t.PLATFORM_ID]}]}]};var p=function(){function e(e,t){this.httpService=e,this.platformId=t}return e.prototype.create=function(e,t){return new s(t||this.httpService,e,this.platformId)},e}();p.decorators=[{type:t.Injectable}],p.ctorParameters=function(){return[{type:n},{type:undefined,decorators:[{type:t.Inject,args:[t.PLATFORM_ID]}]}]};var f=function(){},g=function(){function t(){}return t.forRoot=function(e){return{ngModule:t,providers:[{provide:l,useValue:e||{}},s,n,p]}},t.forChild=function(){return{ngModule:t,providers:[s,n,p]}},t}();g.decorators=[{type:t.NgModule,args:[{imports:[o.CommonModule,c.HttpClientModule],providers:[s,n,p]}]}];var y=function(){function e(){}return e.prototype.trace=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r]},e.prototype.debug=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r]},e.prototype.info=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r]},e.prototype.log=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r]},e.prototype.warn=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r]},e.prototype.error=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r]},e.prototype.updateConfig=function(e){},e}(),m=function(){function e(){}return e.prototype.create=function(){return new y},e}(),R=function(){function e(){}return e.prototype.logOnServer=function(e,t,r,o,n){return i.of({})},e}();e.LoggerModule=g,e.Levels=v,e.NGXLogger=s,e.LoggerConfig=l,e.CustomNGXLoggerService=p,e.NGXLoggerHttpService=n,e.NGXLoggerUtils=d,e.NgxLoggerLevel=h,e.HttpMetaDataInterface=f,e.NGXLoggerMock=y,e.CustomNGXLoggerServiceMock=m,e.NGXLoggerHttpServiceMock=R,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ngx-logger.umd.min.js.map
